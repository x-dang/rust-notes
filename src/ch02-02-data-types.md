## 数据类型

Rust 是一门静态类型语言, 每个变量的类型都是确定的. 本节介绍两种数据类型: 标量和复合类型.

编译器通常能通过值以及我们如何使用它来推断变量的类型. 对于可能有多种类型的值, 例如把字符串转换为数
字, 我们必须添加类型注解. 像这样:

```rust
let guess: u32 = "42".parse().expect("Not a number!");
```


### 标量类型

标量(scalar)类型表示一个单一值, Rust 有四种主要的标量类型: 整数, 浮点, 布尔, 字符.


#### 整数类型

| 长度 | 有符号  | 无符号  |
| ---  | ---     | ---     |
| 8    | `i8`    | `u8`    |
| 16   | `i16`   | `u16`   |
| 32   | `i32`   | `u32`   |
| 64   | `i64`   | `u64`   |
| 128  | `i128`  | `u128`  |
| arch | `isize` | `usize` |

`isize` 和 `usize` 的长度取决于操作系统的架构: 如果是 64 位操作系统, 则长度为 64.

整数字面量:

| 字面量        | 例子          |
| ---           | ---           |
| 十进制        | `98_222`      |
| 十六进制      | `0xff`        |
| 八进制        | `0o77`        |
| 二进制        | `0b1111_0000` |
| 字节(仅 `u8`) | `b'A'`        |

* 可以使用 `_` 作为分隔符, 以方便阅读;
* 除了字节字面量, 其它的都可以加一个类型后缀, 例如 `57u8`;
* 有符号类型可以在前面加一个负号 `-`, 例如 `-0x7fi8`;
* 整数的默认类型是 `i32`.


#### 浮点类型

Rust 有两种主要的浮点类型: `f32` 和 `f64`. 分别是 32 位和 64 位的. 默认浮点类型是 `f64`.

```rust
let x = 1.0; // f64
let y = 1.0f32; // f32
let z: f32 = 1.0; // f32

let a = 1e3; // 1000.0
```


#### 数学运算

基本的数学运算: 加(`+`), 减(`-`), 乘(`*`), 除(`/`), 取余(`%`). 取余运算是向零取余的:

```rust
let x = -5 % 3; // -2
let y = 5 % 3; // 2
```


#### 布尔类型

布尔类型 `bool` 的大小是一个字节, 只有两种可能的值: `true`, `false`.


#### 字符类型

字符类型 `char` 的大小是四个字节, 表示一个 Unicode 标量值.


### 复合类型

复合类型可以将多个值组合为一种类型. Rust 有两种原始的复合类型: 元组(tuples)和数组(arrays).


#### 元组

元组可以将多种类型的多个值组合到一起, 其长度是固定的.

```rust
// 声明
let tup1 = (1,);
let tup2: (u8, f32) = (1, 1.0);
let mut tup3 = (1, 1.0, true);

// 解构
let (x, y) = tup2; // x: 1; y: 1.0

// 访问
let z = tup1.0;

// 赋值
tup3.0 = 0;
tup3.1 = 2.0; // tup3: (0, 2.0, true)
```


#### 数组

和元组一样, 数组的长度也是固定的. 不同的是, 数组的每个元素都必须具有相同的类型.

```rust
// 声明
let arr1 = [1];
let arr2: [i32; 2] = [1, 2]; // [type; N]. type: 元素类型; N: 数组长度
let mut arr3 = [1; 3]; // arr3: [1, 1, 1]. [init; N]. init: 每个元素的初始值; N: 数组长度

// 解构
let [x, y] = arr2; // x: 1; y: 2;

// 访问
let z = arr1[0];

// 赋值
let i = 1;
arr3[0] = 0;
arr3[i] = 2; // arr3: [0, 2, 1]
```
